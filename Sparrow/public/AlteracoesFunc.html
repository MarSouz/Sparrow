<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/AlteracoesFunc.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Alterar dados</title>

    <!-- LINKS OBRIGATORIOS PARA A NAVBAR -->
     <link rel="stylesheet" href="./css/dashboard/dashAnalista.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

</head>

<body>
    <section id="page-change">
        <div class="menu-lateral">
            <nav id="nav">
                <ul>
                    <li>
                        <a href="./index.html" class="logo">
                            <img src="./assets/imgs/Logo2.png" alt="">
                            <span class="nav-item">Sparrow</span>
                        </a>
                    </li>

                    <li>
                        <a href="./dashboard/dashAnalista.html">
                            <i class="fas fa-home"></i>
                            <span class="nav-item">Início</span>
                        </a>
                    </li>

                    <li>
                        <a href="./dashboard/dashAnalista.html">
                            <i class="fas fa-chart-bar"></i>
                            <span class="nav-item">Terminal</span>
                        </a>
                    </li>

                    <li>
                        <a href="./dashboard/dashAnalistaServidor.html">
                            <i class="fas fa-chart-line"></i>
                            <span class="nav-item">Servidor</span>
                        </a>
                    </li>

                    <li>
                        <a href="#">
                            <i class="fas fa-question-circle"></i>
                            <span class="nav-item">Central de atendimento</span>
                        </a>
                    </li>

                    <div class="container-logout">
                        <li>
                            <a href="#" class="logout">
                                <i class="fas fa-sign-out-alt"></i>
                                <span class="nav-item">Sair</span>
                            </a>
                        </li>
                    </div>
                </ul>
            </nav>
        </div>

        <div class="father">
            <div class="child-backpage">

                <div class="child-backpage-title">
                    <h1>Gerenciamento de funcionários</h1>
                    <div class="backpage-icon-add">
                        <button onclick="add_user()">
                            <p>Adicionar Funcionário</p> <img src="./assets/svg/icon-user-add.svg" alt="">
                        </button>
                    </div>
                </div>

                <div class="child-backpage-table-func">
                    <div class="backpage-coluns">
                        <div class="backpage-coluns-item">
                            <p>Nome</p>
                        </div>
                        <div class="backpage-coluns-item">
                            <p>Cargo</p>
                        </div>
                        <div class="backpage-coluns-item center">
                            <p>Editar</p>
                        </div>
                        <div class="backpage-coluns-item center">
                            <p>Excluir</p>
                        </div>
                    </div>

                    <div class="backpage-row">
                        <!-- CARD DO FUNCIONARIO -->
                        <div class="backpage-row-card-func">
                            <div class="backpage-row-item">
                                <p>Elerson Sabará</p>
                            </div>
                            <div class="backpage-row-item">
                                <p>Analista</p>
                            </div>
                            <div class="backpage-row-itemED">

                                <button onclick="edit_func()">
                                    <img src="./assets/svg/icon-pencil.svg" alt="">
                                </button>
                            </div>
                            <div class="backpage-row-itemEX">
                                <button onclick="remove_func()">
                                    <img src="./assets/svg/icon-lixeira.svg" alt="">
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>


    </section>

    <div id="edit-card" class="card-funcionario" style="display: none;">
        <div class="title">
            <h3>Editar funcionário</h3>
            <div onclick="close_card('edit-card')" class="icon-close"><img src="./assets/svg/icon-close.svg" alt="">
            </div>
        </div>
        <div class="child-input">
            <div class="input field">
                <input type="input" class="campo" placeholder="Nome" required="" id="email_input" autocomplete="off">
                <label for="name" class="caixa">Nome do funcionário</label>
            </div>


            <div class="input field">
                <input type="input" class="campo" placeholder="Cargo" required="" id="senha_input" autocomplete="off">
                <label for="name" class="caixa">Cargo</label>
            </div>
            <div class="input field">
                <input type="input" class="campo" placeholder="E-mail" required="" id="email_input" autocomplete="off">
                <label for="name" class="caixa">Email</label>
            </div>


            <div class="input field">
                <input type="input" class="campo" placeholder="Senha" required="" id="senha_input" autocomplete="off">
                <label for="name" class="caixa">Senha</label>
            </div>
        </div>
        <div class="btn">
            <button class="btn-save">Salvar</button>
        </div>
    </div>

    <div id="cadastrar-func" class="card-funcionario" style="display: none;">
        <div class="title">
            <h3>Cadastrar funcionário</h3>
            <div onclick="close_card('cadastrar-func')" class="icon-close"><img src="./assets/svg/icon-close.svg"
                    alt=""></div>
        </div>
        <div class="child-input">
            <div class="input field">
                <input type="input" class="campo" placeholder="Nome" required="" id="ipt_nome" autocomplete="off">
                <label for="name" class="caixa">Nome do funcionário</label>
            </div>


            <div class="input field">
                <input type="input" class="campo" placeholder="Cargo" required="" id="ipt_cargo" autocomplete="off">
                <label for="name" class="caixa">Cargo</label>
            </div>
            <div class="input field">
                <input type="input" class="campo" placeholder="E-mail" required="" id="ipt_email" autocomplete="off">
                <label for="name" class="caixa">Email</label>
            </div>


            <div class="input field">
                <input type="input" class="campo" placeholder="Senha" required="" id="ipt_senha" autocomplete="off">
                <label for="name" class="caixa">Senha</label>
            </div>
        </div>
        <div class="btn">
            <button onclick="cadastrar()" class="btn-save">Cadastrar</button>
        </div>
    </div>

    <div id="card-confirm" class="card-confirm" style="display: none;">
        <div class="text">Deseja excluir este funcionário?</div>
        <div class="btns">
            <button class="btnEx">Excluir</button>
            <button onclick="cancelar()" class="btnC">Cancelar</button>
        </div>
    </div>

</body>

</html>

<script>
    function edit_func() {

        var edit = document.getElementById("edit-card");
        edit.style.display = "block";
    }

    function remove_func() {
        var remove = document.getElementById("card-confirm")
        remove.style.display = "flex"
    }

    function add_user() {
        var add = document.getElementById("cadastrar-func")
        add.style.display = "block"
    }

    function close_card(cardId) {
        var card = document.getElementById(cardId)
        card.style.display = "none"
    }

    function cancelar() {
        var cancel = document.getElementById("card-confirm")
        cancel.style.display = "none"
    }

    function cadastrar() {
        var nome = ipt_nome.value
        var cargo = ipt_cargo.value
        var email = ipt_email.value
        var senha = ipt_senha.value

        if (nome == "" || cargo == "" || email == "" || senha == "") {
            alert("Preencha todos os campos!")
            return
        }

        fetch("/usuarios/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                nomeServer: nome,
                cargoServer: cargo,
                emailServer: email,
                senhaServer: senha,
                fkEmpresaServer: sessionStorage.ID_EMPRESA
            })
        })

            .then(Response => {
                if (!Response.ok) {
                    throw new console.error("Erro ao cadastrar!");
                }

                return Response.json()
            })

            function listar() {
                
            }
}
</script>